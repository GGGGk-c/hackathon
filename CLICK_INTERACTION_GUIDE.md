# 🖱️ 点击交互功能指南

## ✅ 全新的交互方式！

现在不再显示所有标签，而是通过**点击**和**悬停**来查看卫星信息！

---

## 🎮 交互方式

### 1️⃣ **鼠标悬停（Hover）**
- 移动鼠标到卫星上
- 🖱️ 鼠标变成手型指针
- 🏷️ 显示卫星名称标签
- ✨ 卫星变亮并放大光晕

### 2️⃣ **点击卫星（Click）**
- 点击任意卫星
- 📋 右上角显示详细信息面板
- 🎨 卫星变白色并持续脉动
- 🏷️ 名称标签持续显示

### 3️⃣ **取消选择**
- 点击信息面板右上角的 `×`
- 或点击3D场景空白处
- 卫星恢复原状

---

## 📋 信息面板内容

点击卫星后，右上角显示：

```
┌─────────────────────────────┐
│ Sat-25239A               × │  ← 卫星名称 + 关闭按钮
├─────────────────────────────┤
│ Altitude:        6,793 km   │  ← 轨道高度
│ Inclination:     26.78°     │  ← 轨道倾角
│ Eccentricity:    0.8217     │  ← 偏心率
│ Mass:            500 kg     │  ← 质量
│ Status:          ACTIVE  🟢 │  ← 状态
└─────────────────────────────┘
```

---

## 🎨 视觉反馈

### 正常状态
```
     ●         ← 青色小点（0.08 单位）
```

### 悬停状态（Hover）
```
  [Sat-25239A]  ← 名称标签出现
     ✨●✨        ← 亮青色 + 光晕
```

### 选中状态（Selected）
```
  ┌───────────┐
  │Sat-25239A │  ← 白色标签 + 脉动动画
  └───────────┘
     ✨✨●✨✨     ← 白色 + 大光晕 + 脉动
```

---

## 🌟 交互特性

### 鼠标指针
- **正常**：默认箭头
- **悬停卫星**：🖱️ 手型指针（cursor: pointer）
- **点击后**：恢复默认

### 颜色变化
| 状态 | 卫星颜色 | 光晕颜色 | 标签颜色 |
|------|---------|---------|---------|
| 正常（Active） | 青色 | 青色 | - |
| 正常（Warning） | 黄色 | 黄色 | - |
| 正常（Critical） | 红色 | 红色 | - |
| **悬停** | 亮青色 | 亮青色 | 亮青色 |
| **选中** | 白色 | 白色 | 白色 |

### 大小变化
| 状态 | 卫星大小 | 光晕大小 |
|------|---------|---------|
| 正常 | 0.08 | 0.12 |
| 悬停 | 0.08 | 0.12 |
| **选中** | **0.12** | **0.18** |

### 发光强度
| 状态 | 发光强度 |
|------|---------|
| Active | 0.5 |
| Warning/Critical | 1.0 |
| **选中** | **1.5** |

---

## 🎬 动画效果

### 脉动动画（选中时）
```css
@keyframes pulse {
  0%, 100% {
    transform: scale(1);
    opacity: 1;
  }
  50% {
    transform: scale(1.05);
    opacity: 0.9;
  }
}
```

**效果**：
- 标签轻微放大缩小
- 2秒一个周期
- 循环播放

---

## 💡 使用提示

### 初次使用
```
右上角提示：
💡 Click on a satellite to view details
（点击卫星查看详情）
```

### 查看卫星
1. 移动鼠标找到卫星
2. 悬停查看名称
3. 点击查看详细信息

### 对比卫星
1. 点击第一个卫星，查看信息
2. 点击另一个卫星，自动切换
3. 快速对比不同卫星的参数

---

## 🎯 实际场景示例

### 场景1：巡查所有卫星
```
1. 鼠标悬停在每个卫星上
2. 快速查看名称
3. 发现可疑的点击查看详情
```

### 场景2：深入了解特定卫星
```
1. 点击感兴趣的卫星
2. 查看详细参数
3. 记录或截图
4. 点击 × 关闭，继续查看其他
```

### 场景3：监控危险卫星
```
1. 发现红色卫星（Critical）
2. 点击查看状态
3. 信息面板显示 "CRITICAL" 🔴
4. 采取相应行动
```

---

## 🖼️ 详细信息说明

### Altitude（高度）
```
6,793 km
```
- 从地心到卫星的距离
- 半长轴（Semi-major axis）

### Inclination（倾角）
```
26.78°
```
- 轨道平面相对赤道面的角度
- 0° = 赤道轨道
- 90° = 极地轨道
- 98° = 太阳同步轨道

### Eccentricity（偏心率）
```
0.8217
```
- 轨道椭圆程度
- 0 = 完美圆形
- 0-0.1 = 近圆轨道
- 0.7-0.9 = 高偏心轨道
- 0.8217 = 高椭圆轨道

### Mass（质量）
```
500 kg
```
- 卫星质量
- 用于碰撞风险评估

### Status（状态）
```
ACTIVE 🟢   - 正常运行
WARNING 🟡  - 有警告
CRITICAL 🔴 - 危险状态
```

---

## 🎨 视觉对比

### Before（旧方案）
```
[Sat-A][Sat-B]
  [Sat-C]  ●       ← 标签重叠
     ● [Sat-D]       混乱
  [Sat-E]  ●       ← 难以阅读
[Sat-F][Sat-G]
```

### After（新方案）
```
Default:
     ●                ← 干净清爽
  ●     ●            ← 无标签干扰
     ●               ← 一目了然
  ●     ●

Hover:
     ●               
  ●  [Sat-C]  ●      ← 悬停时才显示
     ●               
  ●     ●

Click:
     ●               
  ●  [Sat-C]  ●      ← 选中后持续显示
     ⚪              ← 白色高亮
  ●     ●            
                     
┌─────────────┐
│ Sat-C info  │      ← 详细信息面板
└─────────────┘
```

---

## ⚙️ 技术实现

### 事件处理
```tsx
<Sphere 
  onClick={(e) => {
    e.stopPropagation()  // 防止冒泡
    onSelect(satellite.id)
  }}
  onPointerOver={(e) => {
    e.stopPropagation()
    document.body.style.cursor = 'pointer'
    onHover(satellite.id)
  }}
  onPointerOut={() => {
    document.body.style.cursor = 'auto'
    onHover(null)
  }}
>
```

### 状态管理
```tsx
const [selectedSatelliteId, setSelectedSatelliteId] = useState<string | null>(null)
const [hoveredSatelliteId, setHoveredSatelliteId] = useState<string | null>(null)
```

### 条件渲染
```tsx
// 标签：仅在选中或悬停时显示
{(isSelected || isHovered) && (
  <Html position={...}>
    {satellite.name}
  </Html>
)}

// 信息面板：仅在选中时显示
{selectedSatellite && (
  <div className="...">
    {/* 详细信息 */}
  </div>
)}
```

---

## 🚀 高级功能（可扩展）

### 1. 双击放大
```tsx
onDoubleClick={() => {
  // 摄像机移动到卫星位置
  camera.position.lerp(satellitePosition, 0.1)
}}
```

### 2. 右键菜单
```tsx
onContextMenu={(e) => {
  e.preventDefault()
  showContextMenu(satellite)
}}
```

### 3. 键盘导航
```tsx
useEffect(() => {
  const handleKey = (e: KeyboardEvent) => {
    if (e.key === 'ArrowUp') selectNextSatellite()
    if (e.key === 'ArrowDown') selectPrevSatellite()
    if (e.key === 'Escape') clearSelection()
  }
  window.addEventListener('keydown', handleKey)
  return () => window.removeEventListener('keydown', handleKey)
}, [])
```

---

## 📊 性能优势

### 对比表

| 指标 | 旧方案（全部标签） | 新方案（点击交互） |
|------|------------------|------------------|
| **DOM元素** | 10个 | 0-2个 |
| **渲染负担** | 高 | 低 |
| **视觉清晰度** | 混乱 | 清爽 |
| **重叠问题** | 严重 | 无 |
| **交互性** | 无 | 强 |
| **信息深度** | 浅（仅名称） | 深（完整参数） |

---

## ✅ 优势总结

### ✨ 用户体验
- ✅ 视野清晰，无干扰
- ✅ 按需查看，信息丰富
- ✅ 交互直观，易于操作
- ✅ 视觉反馈明确

### 🚀 技术优势
- ✅ 性能更好（DOM节点少）
- ✅ 无重叠问题
- ✅ 可扩展性强
- ✅ 移动端友好

### 📊 功能丰富
- ✅ 支持悬停预览
- ✅ 支持点击详情
- ✅ 显示完整参数
- ✅ 状态颜色编码

---

## 🎉 完成！

您的 3D 视图现在有：
- ✅ **点击交互**（查看详细信息）
- ✅ **悬停预览**（快速查看名称）
- ✅ **详细信息面板**（完整参数）
- ✅ **视觉反馈**（颜色+大小+动画）
- ✅ **清爽界面**（无标签干扰）

---

## 📸 操作演示

### 步骤1：刷新页面
```
打开 3D Visualization 标签页
```

### 步骤2：悬停查看
```
移动鼠标 → 🖱️ 指针变手型 → 🏷️ 名称出现
```

### 步骤3：点击详情
```
点击卫星 → ⚪ 变白色 → 📋 右侧显示信息面板
```

### 步骤4：关闭
```
点击 × 或点击空白处 → 卫星恢复原样
```

---

**刷新页面立即体验！** 🚀🖱️✨

不再有标签重叠问题，交互更直观！



